{"ast":null,"code":"import _regeneratorRuntime from\"D:/Course 3/Semester_2/\\u0412\\u0435\\u0431/CashR(CourseWork)/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Course 3/Semester_2/\\u0412\\u0435\\u0431/CashR(CourseWork)/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useState}from'react';import'./Modal.css';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalChange=function ModalChange(_ref){var changeButtonClicked=_ref.changeButtonClicked,setUsers=_ref.setUsers,setIsLoading=_ref.setIsLoading,selectedUserID=_ref.selectedUserID,changeUser=_ref.changeUser,setSelectedUserEmail=_ref.setSelectedUserEmail,setSelectedUserLastName=_ref.setSelectedUserLastName,setSelectedUserFirstName=_ref.setSelectedUserFirstName,setChangeButtonClicked=_ref.setChangeButtonClicked,selectedUserFirstName=_ref.selectedUserFirstName,selectedUserLastName=_ref.selectedUserLastName,selectedUserEmail=_ref.selectedUserEmail;function handleCancelClick(){setChangeButtonClicked(false);}function handleChangeClick(){return _handleChangeClick.apply(this,arguments);}function _handleChangeClick(){_handleChangeClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var user,_yield$axios$get,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(selectedUserFirstName===\"\")){_context.next=5;break;}alert(\"Введите фамилию пользователя!\");return _context.abrupt(\"return\");case 5:if(!(selectedUserLastName===\"\")){_context.next=10;break;}alert(\"Введите имя пользователя!\");return _context.abrupt(\"return\");case 10:if(!(selectedUserEmail===\"\")){_context.next=13;break;}alert(\"Введите почту пользователя!\");return _context.abrupt(\"return\");case 13:setIsLoading(true);user={id:selectedUserID,firstname:selectedUserFirstName,lastname:selectedUserLastName,email:selectedUserEmail};_context.next=17;return fetch('http://localhost:5000/admin/updateUser',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(user)}).then(function(response){return response.json();}).then(function(data){alert(data.message);}).catch(function(error){return console.error(error);});case 17:_context.prev=17;_context.next=20;return axios.get('http://localhost:5000/admin/users');case 20:_yield$axios$get=_context.sent;response=_yield$axios$get.data;setUsers(response);_context.next=28;break;case 25:_context.prev=25;_context.t0=_context[\"catch\"](17);console.error(_context.t0.message);case 28:setIsLoading(false);case 29:case\"end\":return _context.stop();}},_callee,null,[[17,25]]);}));return _handleChangeClick.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:changeButtonClicked?\"modal active\":\"modal\",onClick:function onClick(){setChangeButtonClicked(false);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal__content\",onClick:function onClick(e){return e.stopPropagation();},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0434\\u043B\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"userFirstName\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedUserFirstName,placeholder:\"Введите фамилию пользователя\",onChange:function onChange(e){return setSelectedUserFirstName(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"userLastName\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedUserLastName,placeholder:\"Введите имя пользователя\",onChange:function onChange(e){return setSelectedUserLastName(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"userEmail\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u043E\\u0447\\u0442\\u0430 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedUserEmail,placeholder:\"Введите почту пользователя\",onChange:function onChange(e){return setSelectedUserEmail(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleChangeClick,children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCancelClick,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]})]})});};export default ModalChange;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","ModalChange","_ref","changeButtonClicked","setUsers","setIsLoading","selectedUserID","changeUser","setSelectedUserEmail","setSelectedUserLastName","setSelectedUserFirstName","setChangeButtonClicked","selectedUserFirstName","selectedUserLastName","selectedUserEmail","handleCancelClick","handleChangeClick","_handleChangeClick","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","user","_yield$axios$get","response","wrap","_callee$","_context","prev","next","alert","abrupt","id","firstname","lastname","email","fetch","method","headers","body","JSON","stringify","then","json","data","message","catch","error","console","get","sent","t0","stop","className","onClick","children","e","stopPropagation","type","value","placeholder","onChange","target","required"],"sources":["D:/Course 3/Semester_2/Веб/CashR(CourseWork)/front/src/Components/Modal/ModalChange.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport './Modal.css'\r\nimport axios from \"axios\";\r\nconst ModalChange = ({changeButtonClicked, setUsers, setIsLoading, selectedUserID, changeUser, setSelectedUserEmail, setSelectedUserLastName, setSelectedUserFirstName, setChangeButtonClicked, selectedUserFirstName, selectedUserLastName, selectedUserEmail}) => {\r\n\r\n    function handleCancelClick(){\r\n        setChangeButtonClicked(false);\r\n    }\r\n\r\n    async function handleChangeClick(){\r\n        if(selectedUserFirstName===\"\"){\r\n            alert(\"Введите фамилию пользователя!\");\r\n            return;\r\n        }\r\n        else if(selectedUserLastName===\"\"){\r\n            alert(\"Введите имя пользователя!\");\r\n            return;\r\n        }\r\n        else if(selectedUserEmail===\"\"){\r\n            alert(\"Введите почту пользователя!\");\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n        const user={id: selectedUserID, firstname:selectedUserFirstName, lastname: selectedUserLastName, email:selectedUserEmail};\r\n        await fetch('http://localhost:5000/admin/updateUser', {\r\n            method: 'PUT',\r\n            headers: {'Content-Type': 'application/json'},\r\n            body: JSON.stringify(user)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                alert(data.message);\r\n            })\r\n            .catch(error => console.error(error))\r\n\r\n        try {\r\n            const {data: response} = await axios.get('http://localhost:5000/admin/users');\r\n            setUsers(response);\r\n        } catch (error) {\r\n            console.error(error.message);\r\n        }\r\n\r\n        setIsLoading(false);\r\n    }\r\n\r\n    return (\r\n        <div className={changeButtonClicked ? \"modal active\" : \"modal\"} onClick={function () { setChangeButtonClicked(false)}}>\r\n            <div className=\"modal__content\" onClick={e => e.stopPropagation()}>\r\n                <h1>Введите новые данные для пользователя</h1>\r\n                <div className=\"userFirstName\">\r\n                    <h1>Фамилия пользователя:</h1>\r\n                    <input type=\"text\" value={selectedUserFirstName} placeholder={\"Введите фамилию пользователя\"} onChange={(e) => setSelectedUserFirstName(e.target.value)} required />\r\n                </div>\r\n                <div className=\"userLastName\">\r\n                    <h1>Имя пользователя:</h1>\r\n                    <input type=\"text\" value={selectedUserLastName} placeholder={\"Введите имя пользователя\"} onChange={(e) => setSelectedUserLastName(e.target.value)} required />\r\n                </div>\r\n                <div className=\"userEmail\">\r\n                    <h1>Почта пользователя:</h1>\r\n                    <input type=\"text\" value={selectedUserEmail} placeholder={\"Введите почту пользователя\"} onChange={(e) => setSelectedUserEmail(e.target.value)} required />\r\n                </div>\r\n                <div className=\"buttons\">\r\n                    <button onClick={handleChangeClick}>Изменить</button>\r\n                    <button onClick={handleCancelClick}>Отмена</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default ModalChange;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}