{"ast":null,"code":"import _slicedToArray from\"D:/Course 3/Semester_2/\\u0412\\u0435\\u0431/CashR(CourseWork)/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'./Modal.css';import axios from\"axios\";import MultiSelect from\"../DropDown/DropDownMulti\";import MyDatePickerRange from\"../DatePicker/DatePickerRange\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalFilterRange=function ModalFilterRange(_ref){var setModalFilterIsOpened=_ref.setModalFilterIsOpened,expensesSum=_ref.expensesSum,incomesSum=_ref.incomesSum,setIncomeSum=_ref.setIncomeSum,total=_ref.total,setTotal=_ref.setTotal,setExpensesSum=_ref.setExpensesSum,modalFilterIsOpened=_ref.modalFilterIsOpened,transactions=_ref.transactions,sortedTransactions=_ref.sortedTransactions,setSortedTransactions=_ref.setSortedTransactions;var _useState=useState(new Date(\"2023-01-01\")),_useState2=_slicedToArray(_useState,2),startDate=_useState2[0],setStartDate=_useState2[1];var _useState3=useState(new Date(\"2040-01-01\")),_useState4=_slicedToArray(_useState3,2),endDate=_useState4[0],setEndDate=_useState4[1];var values=sortedTransactions.map(function(transaction){return transaction.valueOfTransaction;});var expenses=values.filter(function(transaction){return transaction<0;});var incomes=values.filter(function(transaction){return transaction>0;});setExpensesSum(expenses.reduce(function(total,amount){return total+amount;},0));setIncomeSum(incomes.reduce(function(total,amount){return total+amount;},0));setTotal(expensesSum+incomesSum);function filterByDate(transactions,startDate,endDate){return transactions.filter(function(transaction){var transactionDate=new Date(transaction.dateOfTransaction);return transactionDate>=startDate&&transactionDate<=endDate;});}function handleFilterClick(){setSortedTransactions(filterByDate(transactions,startDate,endDate));setExpensesSum(expenses.reduce(function(total,amount){return total+amount;},0));setIncomeSum(incomes.reduce(function(total,amount){return total+amount;},0));setTotal(expensesSum+incomesSum);values=sortedTransactions.map(function(transaction){return transaction.valueOfTransaction;});expenses=values.filter(function(transaction){return transaction<0;});incomes=values.filter(function(transaction){return transaction>0;});}return/*#__PURE__*/_jsx(\"div\",{className:modalFilterIsOpened?\"modal active\":\"modal\",onClick:function onClick(){setModalFilterIsOpened(false);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal__content\",onClick:function onClick(e){return e.stopPropagation();},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0438\\u0430\\u043F\\u0430\\u0437\\u043E\\u043D \\u0434\\u0430\\u0442:\"}),/*#__PURE__*/_jsx(\"div\",{id:\"datePickerRange\",children:/*#__PURE__*/_jsx(MyDatePickerRange,{startDate:startDate,setStartDate:setStartDate,endDate:endDate,setEndDate:setEndDate,className:\"hidden\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"addButton\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleFilterClick,children:\"\\u041E\\u0442\\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})})]})});};export default ModalFilterRange;","map":{"version":3,"names":["React","useEffect","useState","axios","MultiSelect","MyDatePickerRange","jsx","_jsx","jsxs","_jsxs","ModalFilterRange","_ref","setModalFilterIsOpened","expensesSum","incomesSum","setIncomeSum","total","setTotal","setExpensesSum","modalFilterIsOpened","transactions","sortedTransactions","setSortedTransactions","_useState","Date","_useState2","_slicedToArray","startDate","setStartDate","_useState3","_useState4","endDate","setEndDate","values","map","transaction","valueOfTransaction","expenses","filter","incomes","reduce","amount","filterByDate","transactionDate","dateOfTransaction","handleFilterClick","className","onClick","children","e","stopPropagation","id"],"sources":["D:/Course 3/Semester_2/Веб/CashR(CourseWork)/front/src/Components/Modal/ModalFilterRange.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport './Modal.css'\r\nimport axios from \"axios\";\r\nimport MultiSelect from \"../DropDown/DropDownMulti\";\r\nimport MyDatePickerRange from \"../DatePicker/DatePickerRange\";\r\nconst ModalFilterRange = ({setModalFilterIsOpened, expensesSum, incomesSum, setIncomeSum, total, setTotal, setExpensesSum, modalFilterIsOpened, transactions, sortedTransactions, setSortedTransactions}) => {\r\n\r\n    const [startDate, setStartDate] = useState(new Date(\"2023-01-01\"));\r\n    const [endDate, setEndDate] = useState(new Date(\"2040-01-01\"));\r\n\r\n\r\n    let values = sortedTransactions.map(transaction => transaction.valueOfTransaction);\r\n\r\n    let expenses = values.filter(transaction => transaction < 0);\r\n    let incomes = values.filter(transaction => transaction > 0);\r\n\r\n    setExpensesSum(expenses.reduce((total, amount) => total + amount, 0));\r\n    setIncomeSum(incomes.reduce((total, amount) => total + amount, 0));\r\n    setTotal(expensesSum + incomesSum);\r\n\r\n    function filterByDate(transactions, startDate, endDate) {\r\n        return transactions.filter((transaction) => {\r\n            const transactionDate = new Date(transaction.dateOfTransaction);\r\n            return transactionDate >= startDate && transactionDate <= endDate;\r\n        });\r\n    }\r\n\r\n    function handleFilterClick() {\r\n        setSortedTransactions(filterByDate(transactions, startDate, endDate));\r\n\r\n        setExpensesSum(expenses.reduce((total, amount) => total + amount, 0));\r\n        setIncomeSum(incomes.reduce((total, amount) => total + amount, 0));\r\n        setTotal(expensesSum + incomesSum);\r\n\r\n        values = sortedTransactions.map(transaction => transaction.valueOfTransaction);\r\n\r\n        expenses = values.filter(transaction => transaction < 0);\r\n        incomes = values.filter(transaction => transaction > 0);\r\n    }\r\n\r\n    return (\r\n        <div className={modalFilterIsOpened ? \"modal active\" : \"modal\"} onClick={function () { setModalFilterIsOpened(false)}}>\r\n            <div className=\"modal__content\" onClick={e => e.stopPropagation()}>\r\n                <h1>Введите диапазон дат:</h1>\r\n\r\n                <div id=\"datePickerRange\">\r\n                    <MyDatePickerRange startDate={startDate} setStartDate={setStartDate} endDate={endDate} setEndDate={setEndDate} className=\"hidden\"/>\r\n                </div>\r\n\r\n\r\n                <div className=\"addButton\">\r\n                    <button onClick={handleFilterClick}>Отфильтровать</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default ModalFilterRange;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}